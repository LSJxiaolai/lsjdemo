
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>DanWeiXinXiWH</title>
    <link href="~/Content/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/jquery.bsgrid-1.37/merged/bsgrid.all.min.css" rel="stylesheet" />
    <link href="~/Content/jquery.bsgrid-1.37/css/skins/grid_bootstrap.min.css" rel="stylesheet" />
    <style>
        .container {
            width: 100%;
        }
        .tuot {
            background-color: #74abd4;
               /*-webkit- google*/  
            background: -webkit-linear-gradient(top,#86b6dc 0,#8ab5d5 30%,#72a7d1 50%,#68a6d5 100%);
              /*-moz- 火狐*/
            background: -moz-linear-gradient(top,#86b6dc 0,#8ab5d5 30%,#72a7d1 50%,#68a6d5 100%);
              /*-o- OPERA*/
            background: -o-linear-gradient(top,#86b6dc 0,#8ab5d5 30%,#72a7d1 50%,#68a6d5 100%);
            background: linear-gradient(top,#86b6dc 0,#8ab5d5 30%,#72a7d1 50%,#68a6d5 100%);
            background-repeat: repeat-x;
           /*IE*/
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#86b6dc,endColorstr=#68a6d5,GradientType=0);
        }
        #FormZhuCeXiuGai select,#FormZhuCeXiuGai input{
            height:38px;
        }
        #FormZhuCeXiuGai label{
            padding:9px;
        }
    </style>
</head>
<body>      
    <div class="container" id="modal">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12" style="border:2px solid #e1edee;padding:0;">
                <div class="col-lg-12 col-md-12 col-sm-12 text-left tuot" style="height:50px;background-color:#64b6ed;">
                    <h4><i class="glyphicon glyphicon-tree-conifer" style="color:green;"></i>修改单位信息</h4>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12" style="background-color:#f5f5f5; height:640px;">
                    <form class="form-horizontal" id="FormZhuCeXiuGai" action="/UnitHome/UnitLogin/ZhuCeXiuGaiBaoCun">
                        <input type="text" class="form-control hidden" id="UnitRegisterID" name="UnitRegisterID"/>
                        <div class="form-group" style="margin-top:20px;">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                <i style="color:red">*</i>单位法定全称
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="StatutoryCall" name="StatutoryCall" disabled/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                <i style="color:red">*</i>使用动态令牌
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="UseDynamicOrder" name="UseDynamicOrder" disabled/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                <i style="color:red">*</i>动态令牌号
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="DynamicOrderCode" name="DynamicOrderCode" disabled/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                <i style="color:red">*</i>组织机构代码
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4" style="padding:0;">
                                <div class="col-md-8">
                                    <input type="text" class="form-control" style="padding-left:5px;" id="TissueOrganization" name="TissueOrganization" disabled/>
                                </div>
                               
                                <div class="col-md-3">
                                    <input type="text" class="form-control" style="width:95px;" id="TissueOrganizationCode" name="TissueOrganizationCode" disabled/>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                所属行政区
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="Administrative" name="Administrative" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                通信地址
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="CorrespondenceSite" name="CorrespondenceSite" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                联系人
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="Contact" name="Contact" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                电话
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="ContactPhone" name="ContactPhone" maxlength="11" onKeyUp="value=value.replace(/\D/g,'')" onafterpaste="value=value.replace(/\D/g,'')" placeholder="请输入手机号码"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                邮政编码
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="MailCode" name="MailCode" maxlength="6" onKeyUp="value=value.replace(/\D/g,'')" onafterpaste="value=value.replace(/\D/g,'')"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                <i style="color:red">*</i>单位性质
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="UnitNatureID" name="UnitNatureID" disabled/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4" style="font-weight:lighter;">
                                <i style="color:red">*</i>单位隶属关系
                            </label>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <input type="text" class="form-control" id="SubjectionID" name="SubjectionID" disabled/>
                            </div>
                        </div>
                        <button type="reset" hidden>重置</button>
                    </form>
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="text-center">
                            <button class="btn btn-info" id="btnZhuCeXiuGai" style="background-color:#dfeffc;color:#34759b;font-weight:bold;"><span class="glyphicon glyphicon-download-alt"></span>确认修改</button>
                            <button class="btn btn-info" id="btnZhuCeGuanBi" style="background-color:#dfeffc;color:#34759b;font-weight:bold;" data-dismiss="modal"><span class="glyphicon glyphicon-share-alt"></span>关闭</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="~/Content/bootstrap-3.3.7-dist/js/jquery-1.11.2.min.js"></script>
    <script src="~/Content/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="~/Content/jquery.bsgrid-1.37/js/lang/grid.zh-CN.min.js"></script>
    <script src="~/Content/jquery.bsgrid-1.37/merged/bsgrid.all.min.js"></script>
    <script src="~/Content/js/jquery.form.js"></script>
    <script src="~/Content/js/customfunction.js"></script>
    <script src="~/Content/layer/layer.js"></script>
    <script>
        //注册修改绑定数据
        $.post("/UnitHome/UnitLogin/SelectUnitRegister", function (data) {
            $("#UnitRegisterID").val(data[0].UnitRegisterID);
            $("#StatutoryCall").val(data[0].StatutoryCall);
            $("#UseDynamicOrder").val(data[0].UseDynamicOrder);
            $("#DynamicOrderCode").val(data[0].DynamicOrderCode);
            $("#TissueOrganization").val(data[0].TissueOrganization);
            $("#TissueOrganizationCode").val(data[0].TissueOrganizationCode);
            $("#Administrative").val(data[0].Administrative);
            $("#CorrespondenceSite").val(data[0].CorrespondenceSite);
            $("#Contact").val(data[0].Contact);
            $("#ContactPhone").val(data[0].ContactPhone);
            $("#MailCode").val(data[0].MailCode);
            $("#UnitNatureID").val(data[0].UnitNature);
            $("#SubjectionID").val(data[0].Subjection);
        });

        //注册修改保存
        $("#btnZhuCeXiuGai").click(function () {                        
            var StatutoryCall = $('#FormZhuCeXiuGai [name="StatutoryCall"]').val();//法定全称
            var UseDynamicOrder = $('#FormZhuCeXiuGai [name="UseDynamicOrder"]').val();//使用动态令牌
            var DynamicOrderCode = $('#FormZhuCeXiuGai [name="DynamicOrderCode"]').val();//动态令牌号
            var TissueOrganization = $('#FormZhuCeXiuGai [name="TissueOrganization"]').val();//组织机构代码
            var TissueOrganizationCode = $('#FormZhuCeXiuGai [name="TissueOrganizationCode"]').val();//组织机构代码证
            var Administrative = $('#FormZhuCeXiuGai [name="Administrative"]').val();//所属行政区
            var CorrespondenceSite = $('#FormZhuCeXiuGai [name="CorrespondenceSite"]').val();//通信地址
            var Contact = $('#FormZhuCeXiuGai [name="Contact"]').val();//联系人
            var ContactPhone = $('#FormZhuCeXiuGai [name="ContactPhone"]').val();//联系电话
            var MailCode = $('#FormZhuCeXiuGai [name="MailCode"]').val();//邮政编码
            var UnitNatureID = $('#FormZhuCeXiuGai [name="UnitNatureID"]').val();//单位性质ID
            var SubjectionID = $('#FormZhuCeXiuGai [name="SubjectionID"]').val();//单位隶属关系ID
            if (
                UnitNatureID != ''
                && SubjectionID != ''
                &&StatutoryCall != ''
                && TissueOrganization != ''
                && TissueOrganizationCode != ''
                &&Administrative != ''
                && CorrespondenceSite != ''
                && Contact != ''
                && ContactPhone != ''
                && MailCode != ''
                && UseDynamicOrder != ''
                ) {
                // && DynamicOrderCode != '' 
                var layerIndex = layer.load(0);//显示 加载层
                //提交表单
                $("#FormZhuCeXiuGai").ajaxSubmit(function (msg) {
                    if (msg == "success") {
                        layer.alert("修改成功", { icon: 1, title: '提示' });
                        layer.close(layerIndex);//关闭 加载层  
                        tabChengGuo.refreshPage();//刷新
                    } else {
                        layer.alert("修改失败", { icon: 0, title: '提示' });
                        layer.close(layerIndex);//关闭 加载层 
                    }
                });
            } else {
                layer.alert('请填写完整', { icon: 0, title: '提示' });
            }
        });

        //手机号正则验证
        $("#ContactPhone").blur(function () {
            if ((/^1[34578]\d{9}$/).test($("#ContactPhone").val())) {
                layer.alert("输入正确", { icon: 1 });
                $('#ContactPhone').css("border-color", "green");
                Mobile_Boolean = true;
            } else {
                layer.alert("请输入正确的手机号码", { icon: 2 });
                $('#ContactPhone').css("border-color", "red");
                Mobile_Boolean = false;
            }
        })
    </script>
</body>
</html>
